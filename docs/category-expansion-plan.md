# 카테고리 재정립 실행 계획

## 1) 정보구조(IA)
- 대분류: 곤충, 절지류, 파충류, 어류, 포유류, 양서류, 식물
- 세부 분류 예시
  - 곤충: 장수풍뎅이, 사슴벌레, 개미, 나비, 사마귀
  - 절지류: 타란튤라, 지네, 전갈, 등각류
  - 파충류: 레오파드 게코, 크레스티드 게코, 볼파이썬, 콘스네이크, 이구아나, 카멜레온, 거북
  - 양서류: 팩맨, 엑솔로틀, 화이트트리프록, 다트프록
  - 어류: 구피, 베타, 코리도라스, 안시, 디스커스

## 2) 현재 적용 범위
- 상품 등록: 대분류 + 세부 분류 선택
- 경매 등록/수정: 대분류 + 세부 분류 선택
- 반려생활: 게시글 작성 시 관심 생물군 태그 선택, 목록 필터 추가
- 목록 API: 대분류 필터 시 하위 카테고리/레거시 카테고리까지 통합 조회

## 3) 다음 단계(추천)
1. 온보딩 관심사 질문
   - 가입 직후 `관심 대분류(복수 선택)` 수집
   - 사용자 프로필에 `interestCategories: string[]` 저장
2. 개인화 피드
   - 메인/반려생활에서 관심 카테고리 우선 정렬
   - 관심사가 없으면 기존 최신순 유지
3. 카테고리별 게시판 진입
   - `/posts/category/[slug]` 라우트 제공
   - 예: 파충류 게시판, 양서류 게시판
4. 검색/추천 강화
   - 카테고리 + 제목/본문 가중치 검색
   - 인기글 랭킹을 카테고리별로 분리 제공

## 4) 운영 포인트
- 초기에는 세부 카테고리 변경 가능하도록 유연하게 운영
- 레거시 데이터는 대분류 매핑 테이블로 역호환 유지
- 게시판 분리 전까지는 필터 중심 UX로 데이터 축적 우선

## 5) UI/UX 디자이너 관점 체크리스트
- 카테고리 칩은 `전체 > 대분류 > 하위분류`의 위계를 항상 동일한 위치에 유지해 학습비용을 줄인다.
- 검색 결과는 `총 n건` 요약을 노출해 사용자가 필터/탭 전환의 효과를 즉시 인지할 수 있게 한다.
- 빈 상태(검색 결과 없음)는 대체 행동(추천 검색어/카테고리)과 함께 제시해 이탈을 낮춘다.
- 탭/필터 버튼은 시각 상태와 접근성 상태(`aria-pressed`)를 함께 제공한다.

## 6) 기획 확장성 관점(10년차 실무 기준)
1. 카테고리 거버넌스
   - 운영툴에서 카테고리 추가/비활성/별칭 관리가 가능해야 하며, 코드 하드코딩은 초기 부트스트랩 단계로 제한.
2. 이벤트 스키마 버전관리
   - PostHog 이벤트는 `event_name + required props + version` 문서화.
   - 예: `search_tab_changed`에 `from/to/query`를 필수 속성으로 고정.
3. 개인화 준비
   - 사용자 관심 카테고리를 `user_profile_interest`로 별도 관리해 피드/알림/검색 추천에서 공통 사용.
4. 게시판 분화 전략
   - 단일 게시판 + 강한 필터에서 시작하되, 트래픽 임계치 도달 시 카테고리 전용 랜딩(예: `/posts/category/reptile`)로 확장.
5. 데이터 품질 관리
   - 레거시 카테고리 유입 비율을 모니터링하고, 임계치 이하 시 alias 단계적 정리.


## 7) 로그인 후 "관심 분류 선택" 도입 검토
### 결론(현재 시점)
- **지금 바로 강제 수집은 보류**, 대신 **소프트 온보딩(스킵 가능)** 으로 먼저 도입하는 것이 적절함.
- 이유: 현재 카테고리 데이터 구조/필터는 준비되었지만, 개인화 노출 정책(랭킹 가중치/피드 비율)과 운영지표 기준이 완전히 합의되지 않았기 때문.

### 왜 필요한가
1. 초기 콜드스타트 개선
   - 신규 유저가 첫 방문에서 원하는 생물군 콘텐츠를 빠르게 보게 해 이탈률을 낮출 수 있음.
2. 탐색 비용 감소
   - 반려생활/상품/경매에서 대분류 필터를 반복 선택하는 행동을 기본값으로 대체 가능.
3. 개인화 기반 확장
   - 향후 푸시 알림, 추천 검색어, 카테고리 게시판 분화의 공통 신호로 활용 가능.

### 왜 "강제"는 아직 이른가
- 가입 퍼널 마찰 증가(완주율 하락) 리스크가 있음.
- 관심사 미선택/다중 관심 사용자 처리 정책이 아직 고정되지 않음.
- 개인화 실패 시(잘못된 추천) 신뢰 저하가 발생할 수 있어 A/B 검증이 선행되어야 함.

### 권장 구현안(Phase)
- **Phase 1: 소프트 선택(권장)**
  - 로그인 직후 바텀시트 노출: "관심 있는 생물군을 선택해 주세요(복수 선택 가능)"
  - CTA: `선택 완료` / `나중에 하기`
  - 저장 필드(예시): `user.interestCategories: string[]`
- **Phase 2: 피드 약한 개인화**
  - 전체 피드 유지 + 관심 카테고리 콘텐츠를 상단에 일부 가중치 반영(예: 상위 30%)
- **Phase 3: 개인화 강화**
  - 검색 추천어, 카테고리 게시판 진입, 알림 타겟팅까지 확장

### 성공 지표(최소)
- 가입/로그인 후 첫 세션 24시간 내 재방문율
- 검색 전환율(검색 실행/세션)
- 카테고리 필터 사용률 및 필터 후 클릭률
- 게시글/상품 상세 진입률

### 이벤트 계측 제안(PostHog)
- `interest_onboarding_exposed`
- `interest_onboarding_skipped`
- `interest_onboarding_submitted` (props: `{ count, categories }`)
- `interest_personalized_feed_seen` (props: `{ ratio, categories }`)
